angular.module("starter",["ionic","ngMaterial"]).run(["$ionicPlatform","$rootScope","$state",function(e,o,t){e.ready(function(){window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleDefault(),firebase.auth().onAuthStateChanged(function(e){o.user=firebase.auth().currentUser,null!=o.user?(o.isLoggedIn=!0,console.log("loggedIN"),t.go("home")):(o.isLoggedIn=!1,console.log("loggedOUT"),t.go("auth"))})})}]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,o,t){t.views.transition("none"),e.state("auth",{url:"/auth",templateUrl:"templates/auth.html",controller:"authCtrl"}).state("home",{url:"/home",templateUrl:"templates/home.html",controller:"homeCtrl"}),o.otherwise("/home")}]),angular.module("starter").controller("authCtrl",["$scope","$mdToast",function(e,o){e.showSignIn=!1,e.signUp=function(e){firebase.auth().createUserWithEmailAndPassword(e.email,e.password).then(function(o){firebase.database().ref("users/"+o.uid).update({name:e.name,username:e.username,status:"online"}),console.log(e)}).catch(function(e){var t=e.code,n=e.message;o.show(o.simple().textContent("Error "+t+": "+n).hideDelay(3e3))})},e.signIn=function(e){firebase.auth().signInWithEmailAndPassword(e.email,e.password).then(function(e){firebase.database().ref("users/"+e.uid).update({status:"online"})}).catch(function(e){var t=e.code,n=e.message;o.show(o.simple().textContent("Error "+t+": "+n).hideDelay(3e3))}),console.log("sign in")},e.switch=function(){0==e.showSignIn?e.showSignIn=!0:1==e.showSignIn&&(e.showSignIn=!1),console.log(e.showSignIn)}}]),angular.module("starter").controller("homeCtrl",["$scope","$timeout","$state",function(e,o,t){e.movies=[],e.getMovies=function(){firebase.database().ref("movies").once("value").then(function(o){o.forEach(function(o){firebase.storage().ref("images/"+o.val().poster).getDownloadURL().then(function(t){e.movies.push({name:o.val().name,year:o.val().year,poster:t}),e.$applyAsync()})})})},e.movieChosen=function(e){console.log(e)}}]),angular.module("starter").controller("navCtrl",["$scope","$timeout","$state",function(e,o,t){e.title="Synchronized Video Streaming",e.signOut=function(){firebase.auth().signOut().then(function(){},function(e){})}}]);